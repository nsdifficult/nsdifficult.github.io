
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Objective-C的类别，类扩展与私有方法 - RONGYI.WORK</title>
	<meta name="author" content="易荣义">

	
	<meta name="description" content="类扩展 始终不明白类扩展是什么东西,今天查了下文档 A class extension bears some similarity to a category, but it can only be added to a class for which you have the source &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="RONGYI.WORK" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="http://libs.useso.com/js/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">RONGYI.WORK</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">主页</a></li>
	<li><a href="/blog/archives">所有文章</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">主页</a></li>
	<li><a href="/blog/archives">所有文章</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:rongyi.work">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:rongyi.work">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Objective-C的类别，类扩展与私有方法</h2>
	<div class="entry-content"><h2>类扩展</h2>

<p>始终不明白类扩展是什么东西,今天查了下文档</p>

<blockquote><p>A class extension bears some similarity to a category, <!--more-->but it can only be added to a class for which you have the source code at compile time (the class is compiled at the same time as the class extension). The methods declared by a class extension are implemented in the @implementation block for the original class so you can’t, for example, declare a class extension on a framework class, such as a Cocoa or Cocoa Touch class like NSString.<br></p>

<p>Because no name is given in the parentheses, class extensions are often referred to as anonymous categories.</p>

<p>Unlike regular categories, a class extension can add its own properties and instance variables to a class.</p>

<p>Because no name is given in the parentheses, class extensions are often referred to as anonymous categories.</p>

<p>Unlike regular categories, a class extension can add its own properties and instance variables to a class.</p>

<p>the compiler will automatically synthesize the relevant accessor methods, as well as an instance variable, inside the primary class implementation.</p>

<p>If you add any methods in a class extension, these must be implemented in the primary implementation for the class.</p>

<p>It’s also possible to use a class extension to add custom instance variables.</p></blockquote>

<p>按理说，类扩展中的的方法应该属于私有方法了，但是它真不是私有方法。。。</p>

<blockquote><p>(Btw, it&rsquo;s not really a private method, it&rsquo;s just hidden from the interface. Any outside object that knows the message signature can still call it. &ldquo;Real&rdquo; private methods don&rsquo;t exist in Objective-C.)</p></blockquote>

<p>就是说根本就没有私有方法！根本上就是一个在interface没有声明的隐藏起来的的消息（方法）。如果其他对象知道这个消息名称（方法名称），它就可以发送这个消息（调用这个方法），不管你隐藏的多深！！！</p>

<p>如下面这段代码:</p>

<pre><code>

#import <Foundation/Foundation.h>
#import "Asia.h"

@interface Language : NSObject
@end

#import "Language.h"
@interface Language ()
@property(nonatomic,copy) NSString *name1;
//- (NSString *)speakHello;

@end
@implementation Language

- (NSString *)speakHello{
return @"hello!!!";
}
- (void )speakHi{
    NSLog(@"Hi!!!");
}
@end

</pre>


<p></code></p>

<pre><code>

#import <Foundation/Foundation.h>
import "Language.h"


@interface English : Language
- (void)printName;
@end

#import "English.h"
@interface English ()
- (NSString *)speakHello;
@end
@implementation English
- (void)printName{
NSLog(@"%@",[self speakHello]);

if ([self respondsToSelector:@selector(speakHi)]) {
  [self performSelector:@selector(speakHi)];
}
;

}

@end

</pre>


<p></code>
运行printName方法，输出：</p>

<pre><code>
hello!!!
Hi!!!
</pre>


<p></code>
看，它首先给自己也就是English对象发送speakHello消息，结果它没有，好吧，转发给父类对象，虽然有speakHello消息，但是是在interface没有声明的，但它的确有，它响应了这个消息！</p>

<h2>类别</h2>

<p>又查了下类别</p>

<blockquote><p>You use categories to define additional methods of an existing class—even one whose source code is unavailable to you—without subclassing. You typically use a category to add methods to an existing class, such as one defined in the Cocoa frameworks. The added methods are inherited by subclasses and are indistinguishable at runtime from the original methods of the class. You can also use categories of your own classes to:</p>

<p>Distribute the implementation of your own classes into separate source files—for example, you could group the methods of a large class into several categories and put each category in a different file.</p>

<p>Declare private methods.</p>

<p>You add methods to a class by declaring them in an interface file under a category name and defining them in an implementation file under the same name. The category name indicates that the methods are an extension to a class declared elsewhere, not a new class</p></blockquote>
</div>


<div class="meta">
	<div class="date">




Aug 17th, 2013</div>
	<div class="tags">

</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>




  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="/blog/2013/08/17/objectivecleibie" data-title="Objective-C的类别，类扩展与私有方法" data-url="rongyi.work/blog/2013/08/17/objectivecleibie/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"24yi"};
    (function() {

        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
     })();
 </script>
 <!-- 多说公共JS代码 end -->
</div>
  </section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    易荣义

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>