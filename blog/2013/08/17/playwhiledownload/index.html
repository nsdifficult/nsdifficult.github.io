
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜ - å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„</title>
	<meta name="author" content="æ˜“è£ä¹‰">

	
	<meta name="description" content="ä»‹ç» éœ€æ±‚ å®ç°åœ¨éŸ³è§†é¢‘æ’­æ”¾çš„æ—¶å€™å³è¿›è¡Œç¼“å†²ï¼Œå³è¾¹æ’­æ”¾è¾¹ä¸‹è½½ã€‚ æŠ€æœ¯ä»‹ç» æ€è·¯æ¥è‡ªhttp://www.cnblogs.com/zhouguixin/p/3139522.htmlã€‚è¦ç‚¹æ˜¯åœ¨å…ˆå¼€ä¸€ä¸ªä¸‹è½½çš„çº¿ç¨‹ä¸‹è½½è§†é¢‘æ–‡ä»¶ï¼Œç„¶ååœ¨æœ¬åœ°å»ºä¸€ä¸ªserverï¼Œç„¶åæ‹¼æ¥ä¸€ä¸ªurlç»™æ’­æ”¾å™¨ã€‚ &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="http://libs.useso.com/js/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">ä¸»é¡µ</a></li>
	<li><a href="/blog/archives">æ‰€æœ‰æ–‡ç« </a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">ä¸»é¡µ</a></li>
	<li><a href="/blog/archives">æ‰€æœ‰æ–‡ç« </a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:rongyi.work">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:rongyi.work">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜</h2>
	<div class="entry-content"><h1 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-ä»‹ç»">ä»‹ç»</h1>


<!--more-->


<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-éœ€æ±‚">éœ€æ±‚</h2>


<p>å®ç°åœ¨éŸ³è§†é¢‘æ’­æ”¾çš„æ—¶å€™å³è¿›è¡Œç¼“å†²ï¼Œå³è¾¹æ’­æ”¾è¾¹ä¸‹è½½ã€‚</p>

<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-æŠ€æœ¯ä»‹ç»">æŠ€æœ¯ä»‹ç»</h2>


<p>æ€è·¯æ¥è‡ª<a href="http://www.cnblogs.com/zhouguixin/p/3139522.html" rel="nofollow"><a href="http://www.cnblogs.com/zhouguixin/p/3139522.html">http://www.cnblogs.com/zhouguixin/p/3139522.html</a></a>ã€‚è¦ç‚¹æ˜¯åœ¨å…ˆå¼€ä¸€ä¸ªä¸‹è½½çš„çº¿ç¨‹ä¸‹è½½è§†é¢‘æ–‡ä»¶ï¼Œç„¶ååœ¨æœ¬åœ°å»ºä¸€ä¸ªserverï¼Œç„¶åæ‹¼æ¥ä¸€ä¸ªurlç»™æ’­æ”¾å™¨ã€‚</p>

<h1 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-ä»£ç å®ç°ä¸­é‡åˆ°çš„é—®é¢˜">ä»£ç å®ç°ä¸­é‡åˆ°çš„é—®é¢˜</h1>


<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-ç°è±¡">ç°è±¡</h2>


<p>ç‚¹å‡»æ’­æ”¾ï¼ŒMPMovicePlayerControlleræŠ¥é”™ï¼Œé”™è¯¯ä¸ºï¼š</p>

<div>
<div><strong>é”™è¯¯æ—¥å¿—</strong></div>
<div>
<div>
<div id="highlighter_886016">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>2013</code><code>-</code><code>06</code><code>-</code><code>27</code> <code>18</code><code>:</code><code>49</code><code>:</code><code>28.727</code> <code>TibetVoice[</code><code>7748</code><code>:c07] {</code></div>
<div><code>Â Â Â Â </code><code>MPMoviePlayerPlaybackDidFinishReasonUserInfoKey = </code><code>1</code><code>;</code></div>
<div><code>Â Â Â Â </code><code>error = </code><code>"Error Domain=MediaPlayerErrorDomain Code=-11828 \"Cannot Open\" UserInfo=0x9246dc0 {NSLocalizedDescription=Cannot Open}"</code><code>;</code></div>
<div><code>}</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-åˆ†æ1">åˆ†æ1</h2>


<p>ä½¿ç”¨çš„æ–­ç‚¹ç»­ä¼ çš„å¼€æºåº“æ˜¯<a href="https://github.com/steipete/AFDownloadRequestOperation" rel="nofollow">AFDownloadRequestOperation</a>ï¼Œå®ƒå°†ç¼“å†²æ–‡ä»¶ä¿å­˜çš„æ–‡ä»¶åæ²¡æœ‰åç¼€ï¼Œåæ¥æƒ³åˆ°ç¼“å†²æ–‡ä»¶éœ€è¦å’ŒåŸå§‹æ–‡ä»¶ä¸€è‡´ï¼Œæ›´æ”¹ç¼“å†²æ–‡ä»¶å‘½åæ–¹å¼ä¸ºï¼š</p>

<div>
<div><strong>æ›´æ”¹å‘½åè§„åˆ™</strong></div>
<div>
<div>
<div id="highlighter_139116">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>NSString *md5URLString = [[self.targetPath lastPathComponent] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</code></div>
<div><code>Â Â Â Â Â Â Â Â </code><code>//NSString *md5URLString = [NSString stringWithFormat:@"%@",[[self class] md5StringForString:self.targetPath]];</code></div>
<div><code>Â Â Â Â Â Â Â Â </code><code>tempPath = [[[self </code><code>class</code><code>] cacheFolder] stringByAppendingPathComponent:md5URLString];Â </code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<p>æ›´æ”¹åå‘ç°è§†é¢‘è¿˜æ˜¯ä¸èƒ½æŠ¥é”™ï¼Œé”™è¯¯ä¸ºï¼š</p>

<div>
<div><strong>é”™è¯¯æ—¥å¿—</strong></div>
<div>
<div>
<div id="highlighter_134531">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>2013</code><code>-</code><code>06</code><code>-</code><code>27</code> <code>18</code><code>:</code><code>57</code><code>:</code><code>08.870</code> <code>TibetVoice[</code><code>7808</code><code>:c07] {</code></div>
<div><code>Â Â Â Â </code><code>MPMoviePlayerPlaybackDidFinishReasonUserInfoKey = </code><code>1</code><code>;</code></div>
<div><code>Â Â Â Â </code><code>error = </code><code>"Error Domain=MediaPlayerErrorDomain Code=-11800 \"The operation could not be completed\" UserInfo=0x914be70 {NSLocalizedDescription=The operation could not be completed}"</code><code>;</code></div>
<div><code>}</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-åˆ†æ2">åˆ†æ2</h2>


<p>è¾¹æ’­æ”¾è¾¹ä¸‹è½½çš„å®ç°æ–¹å¼æ¥æºäº<a href="http://www.cnblogs.com/zhouguixin/p/3139522.html" rel="nofollow"><a href="http://www.cnblogs.com/zhouguixin/p/3139522.html">http://www.cnblogs.com/zhouguixin/p/3139522.html</a></a>ï¼Œæ–‡ç« ä¸­æœ‰ä¸€æ®µï¼š</p>

<div>
<div><strong>è§£é‡Š</strong></div>
<div>
<div>
<div id="highlighter_34034">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>æ˜¯æœ‰ä¸€ç‚¹éœ€è¦è‡ªå·±å®ç°ï¼šå½“httpserveræ¥å—åˆ°MPMoviePlayerControllerçš„è¯·æ±‚æ—¶ï¼Œserverè¦å…ˆè¿”å›ä¸€ä¸ªè¯·æ±‚åŒ…å«äº†æ•´ä¸ª</code></div>
<div><code>è§†é¢‘æ–‡ä»¶çš„å¤§å°ã€‚ç„¶åMPMoviePlayerControlleræ‰ä¼šä¸æ–­è¯·æ±‚æœ¬åœ°çš„æœåŠ¡å™¨å–æ•°æ®ã€‚æˆ‘çš„å®ç°æ˜¯è¿™æ ·çš„ã€‚å½“è¦æ¯”æ–¹æŸä¸ªè§†é¢‘æ–‡ä»¶çš„æ—¶å€™ï¼Œ</code></div>
<div><code>å…ˆå¼€å¯ä¸€ä¸ªrequestå»ä¸‹è½½ï¼Œå½“æ”¶åˆ°æ–‡ä»¶æ€»å¤§å°çš„æ—¶å€™ï¼Œå­˜åˆ°æœ¬åœ°çš„ä¸€ä¸ªdictionaryä¸­ï¼Œrequestç»§ç»­ä¸‹è½½ï¼Œç„¶åæ‰“å¼€</code></div>
<div><code>localserverï¼Œæ‹¼ä¸€ä¸ªæœ¬åœ°urlç»™playerï¼Œè®©ä»–è‡ªåŠ¨æ’­æ”¾ã€‚å½“localserveræ”¶åˆ°è¯·æ±‚æ—¶ï¼Œæ ¹æ®è¦è¯·æ±‚çš„æ–‡ä»¶å»æœ¬åœ°è¯»æ–‡ä»¶çš„å®é™…å¤§</code></div>
<div><code>å°ï¼Œè¿”å›ç»™playerï¼Œç„¶åplayerå°±å¯ä»¥æ’­æ”¾äº†ã€‚</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<p>è¿™æ®µå¼€å§‹çœ‹çš„ä¸æ˜å°±é‡Œï¼Œåæ¥åœ¨googleä¸Šæœåˆ°<a href="https://groups.google.com/forum/#%21topic/cocoahttpserver/-da-UI44w0Y" rel="nofollow">è¿™ç¯‡æ–‡ç« </a>ï¼Œé‡Œé¢æœ‰ä¸€æ®µè¯ï¼š</p>

<div>
<div><strong>è§£é‡Š</strong></div>
<div>
<div>
<div id="highlighter_885035">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>Hello Robbiehanson!</code></div>
<div></div>
<div><code>Thanks </code><code>for</code> <code>your works!</code></div>
<div></div>
<div><code>I'm implement your project to play video streaming. In method "-</code></div>
<div></div>
<div><code>(NSObject&lt;HTTPResponse&gt; *)httpResponseForMethod:(NSString *)method URI:</code></div>
<div></div>
<div><code>(NSString *)path" i'm using HTTPAsyncFileResponse and set fileLength</code></div>
<div></div>
<div><code>of file on server. But video is playing with no sound. So what was the</code></div>
<div></div>
<div><code>reason?</code></div>
<div></div>
<div><code>Thanks!.</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<p>æ˜ç™½äº†è¦æŠŠ<a href="https://github.com/robbiehanson/CocoaHTTPServer" rel="nofollow">cocoahttpserver</a>ä¸­çš„è®¾ç½®è¯»å–æ–‡ä»¶å¤§å°çš„ä»£ç ï¼Œè®©æœ¬åœ°æœåŠ¡å™¨ä»¥è§†é¢‘åŸå§‹æ–‡ä»¶å¤§å°å»è¯»ï¼š</p>

<div>
<div><strong>ä¿®æ”¹è¯»å–æ–‡ä»¶çš„å¤§å°</strong></div>
<div>
<div>
<div id="highlighter_39416">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>//fileLength = (UInt64)[[fileAttributes objectForKey:NSFileSize] unsignedLongLongValue];</code></div>
<div><code>Â Â </code><code>fileLength = [FileTools fileSizeWithUrl:filePath];</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<p>å†è¿è¡Œï¼Œå‘ç°èƒ½æ’­æ”¾äº†</p>

<h1 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-æ’­æ”¾mp4æµå’Œhlsæµé—®é¢˜">æ’­æ”¾mp4æµå’Œhlsæµé—®é¢˜</h1>


<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-mp4">mp4</h2>


<p>æ’­æ”¾mp4æ­£å¸¸</p>

<h2 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-m3u8">m3u8</h2>


<p>ç‚¹å‡»æ’­æ”¾ï¼ŒMPMovicePlayerControlleræŠ¥é”™ï¼Œé”™è¯¯ä¸ºï¼š</p>

<div>
<div><strong>é”™è¯¯æ—¥å¿—</strong></div>
<div>
<div>
<div id="highlighter_46561">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>2013</code><code>-</code><code>06</code><code>-</code><code>27</code> <code>19</code><code>:</code><code>15</code><code>:</code><code>18.372</code> <code>TibetVoice[</code><code>7885</code><code>:c07] Error: Error Domain=NSCocoaErrorDomain Code=</code><code>516</code> <code>"The operation couldnâ€™t be completed.</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<h3 id="id-(2013-06-27)éŸ³è§†é¢‘è¾¹æ’­æ”¾è¾¹ä¸‹è½½æŠ€æœ¯è°ƒç ”åŠé—®é¢˜-åˆ†æ">åˆ†æ</h3>


<p>åˆ°è™šæ‹Ÿæœºçš„åº”ç”¨ç›®å½•ä¸‹çœ‹åˆ°æœ¬åœ°æœ‰ä¸€ä¸ªm3u8æ–‡ä»¶ï¼Œæ‰“å¼€å‘ç°æ˜¯ï¼š</p>

<div>
<div><strong>m3u8</strong></div>
<div>
<div>
<div id="highlighter_810498">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<div title="Hint: double-click to select code">
<div><code>#EXTM3U</code></div>
<div><code>#EXT-X-TARGETDURATION:</code><code>10</code></div>
<div><code>#EXT-X-MEDIA-SEQUENCE:</code><code>0</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence0.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence1.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence2.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence3.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence4.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence5.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence6.ts</code></div>
<div><code>#EXTINF:</code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence7.ts</code></div>
<div><code>#EXTINF:<code></code></code><code>10</code><code>, no desc</code></div>
<div><code>fileSequence8.ts</code></div>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<p>å³m3u8åªæ˜¯æŒ‡å‘å¾ˆå¤štsæ–‡ä»¶çš„ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ï¼Œå½“ç„¶ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœéœ€è¦æƒ³è¦å®ç°å¯¹HTTP LIVE STREAMING (hls)çš„è¾¹æ’­æ”¾è¾¹ä¸‹è½½ï¼Œè¿˜éœ€è¦è§£æè¿™ä¸ªç´¢å¼•æ–‡ä»¶ï¼Œç„¶åå†åˆ†åˆ«ä¸‹è½½ï¼Œå†ç»„è£…æˆä¸€ä¸ªè§†é¢‘æ–‡ä»¶ç„¶åæ’­æ”¾ï¼Œå½“ç„¶ï¼Œè¿™å°±ä¸æ˜¯è¾¹æ’­æ”¾è¾¹ä¸‹è½½äº†ã€‚</p>

<p>ä¾‹å­è§ï¼š<a href="https://github.com/nsdifficult/DownloadWhilePlaying">DownloadWhilePlaying</a></p>
</div>


<div class="meta">
	<div class="date">




Aug 17th, 2013</div>
	<div class="tags">

</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    æ˜“è£ä¹‰

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>