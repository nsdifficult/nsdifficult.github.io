
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼ - å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„</title>
	<meta name="author" content="æ˜“è£ä¹‰">

	
	<meta name="description" content="å®šä¹‰ æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå¹¶å…è®¸æ¬¡ç±»åˆ«ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤æä¾›å…¶å®è·µæ–¹å¼ã€‚è®©æ¬¡ç±»åˆ«åœ¨ä¸æ”¹å˜ç®—æ³•æ¶æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå®ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå’ŒC++æ¨¡æ¿æ²¡æœ‰å…³è¿ã€‚
æ¨¡æ¿æ–¹æ³•æ¨¡å¼éœ€è¦å¼€å‘æŠ½è±¡ç±»å’Œå…·ä½“å­ç±»çš„è®¾è®¡å¸ˆä¹‹é—´çš„åä½œã€‚ä¸€ä¸ªè®¾è®¡å¸ˆè´Ÿè´£ç»™å‡ºä¸€ä¸ªç®—æ³•çš„è½®å»“å’Œéª¨æ¶ &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="http://libs.useso.com/js/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">å›¾æ ·å›¾æ£®ç ´å•ŠğŸ˜„</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">ä¸»é¡µ</a></li>
	<li><a href="/blog/archives">æ‰€æœ‰æ–‡ç« </a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">ä¸»é¡µ</a></li>
	<li><a href="/blog/archives">æ‰€æœ‰æ–‡ç« </a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:rongyi.work">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:rongyi.work">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h2>
	<div class="entry-content"><h2>å®šä¹‰</h2>

<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå¹¶å…è®¸æ¬¡ç±»åˆ«ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤æä¾›å…¶å®è·µæ–¹å¼ã€‚è®©æ¬¡ç±»åˆ«åœ¨ä¸æ”¹å˜ç®—æ³•æ¶æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå®ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå’ŒC++æ¨¡æ¿æ²¡æœ‰å…³è¿ã€‚<!--more--><br/>
æ¨¡æ¿æ–¹æ³•æ¨¡å¼éœ€è¦å¼€å‘æŠ½è±¡ç±»å’Œå…·ä½“å­ç±»çš„è®¾è®¡å¸ˆä¹‹é—´çš„åä½œã€‚ä¸€ä¸ªè®¾è®¡å¸ˆè´Ÿè´£ç»™å‡ºä¸€ä¸ªç®—æ³•çš„è½®å»“å’Œéª¨æ¶ï¼Œå¦ä¸€äº›è®¾è®¡å¸ˆåˆ™è´Ÿè´£ç»™å‡ºè¿™ä¸ªç®—æ³•çš„å„ä¸ªé€»è¾‘æ­¥éª¤ã€‚ä»£è¡¨è¿™äº›å…·ä½“é€»è¾‘æ­¥éª¤çš„æ–¹æ³•ç§°åšåŸºæœ¬æ–¹æ³•(primitive method)ï¼›è€Œå°†è¿™äº›åŸºæœ¬æ–¹æ³•æ±‡æ€»èµ·æ¥çš„æ–¹æ³•å«åšæ¨¡æ¿æ–¹æ³•(template method)ï¼Œè¿™ä¸ªè®¾è®¡æ¨¡å¼çš„åå­—å°±æ˜¯ä»æ­¤è€Œæ¥ã€‚</p>

<p>æ¨¡æ¿æ–¹æ³•åŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼š</p>

<ol>
<li>æŠ½è±¡æ¨¡æ¿ï¼šåŒ…æ‹¬å…·ä½“æ–¹æ³•ï¼ˆå…·ä½“ç®—æ³•æ­¥éª¤ï¼‰å’ŒåŸºæœ¬æ–¹æ³•ï¼ˆåŒ…æ‹¬ï¼šæŠ½è±¡æ–¹æ³•ã€å…·ä½“æ–¹æ³•ã€é’©å­æ–¹æ³•ï¼‰</li>
<li>å…·ä½“æ¨¡æ¿ï¼šå®ç°çˆ¶ç±»å³æŠ½è±¡æ¨¡æ¿çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªæŠ½è±¡æ–¹æ³•ã€‚æ¯ä¸ªå…·ä½“æ¨¡æ¿è§’è‰²éƒ½å¯ä»¥ç»™å‡ºè¿™äº›æŠ½è±¡æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯ç®—æ³•çš„ç»„æˆæ­¥éª¤ï¼‰çš„ä¸åŒå®ç°ï¼Œä»è€Œä½¿å¾—é¡¶çº§é€»è¾‘çš„å®ç°å„ä¸ç›¸åŒã€‚</li>
</ol>


<h2>æ¨¡æ¿æ–¹æ³•å’ŒåŸºæœ¬æ–¹æ³•</h2>

<h3>æ¨¡æ¿æ–¹æ³•</h3>

<p>ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•æ˜¯å®šä¹‰åœ¨æŠ½è±¡ç±»ä¸­çš„ï¼ŒæŠŠåŸºæœ¬æ“ä½œæ–¹æ³•ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ€»ç®—æ³•æˆ–ä¸€ä¸ªæ€»è¡Œä¸ºçš„æ–¹æ³•ã€‚<br/>
ä¸€ä¸ªæŠ½è±¡ç±»å¯ä»¥æœ‰ä»»æ„å¤šä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œè€Œä¸é™äºä¸€ä¸ªã€‚æ¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ä»»æ„å¤šä¸ªå…·ä½“æ–¹æ³•ã€‚</p>

<h3>åŸºæœ¬æ–¹æ³•</h3>

<p>åŸºæœ¬æ–¹æ³•åˆå¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼šæŠ½è±¡æ–¹æ³•(Abstract Method)ã€å…·ä½“æ–¹æ³•(Concrete Method)å’Œé’©å­æ–¹æ³•(Hook Method)ã€‚</p>

<ul>
<li>æŠ½è±¡æ–¹æ³•ï¼šä¸€ä¸ªæŠ½è±¡æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜ï¼Œç”±å…·ä½“å­ç±»å®ç°ã€‚åœ¨Javaè¯­è¨€é‡ŒæŠ½è±¡æ–¹æ³•ä»¥abstractå…³é”®å­—æ ‡ç¤ºã€‚</li>
<li>å…·ä½“æ–¹æ³•ï¼šä¸€ä¸ªå…·ä½“æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜å¹¶å®ç°ï¼Œè€Œå­ç±»å¹¶ä¸å®ç°æˆ–ç½®æ¢ã€‚</li>
<li>é’©å­æ–¹æ³•ï¼šä¸€ä¸ªé’©å­æ–¹æ³•ç”±æŠ½è±¡ç±»å£°æ˜å¹¶å®ç°ï¼Œè€Œå­ç±»ä¼šåŠ ä»¥æ‰©å±•ã€‚é€šå¸¸æŠ½è±¡ç±»ç»™å‡ºçš„å®ç°æ˜¯ä¸€ä¸ªç©ºå®ç°ï¼Œä½œä¸ºæ–¹æ³•çš„é»˜è®¤å®ç°ã€‚</li>
</ul>


<h3>é»˜è®¤é’©å­æ–¹æ³•</h3>

<p>ä¸€ä¸ªé’©å­æ–¹æ³•å¸¸å¸¸ç”±æŠ½è±¡ç±»ç»™å‡ºä¸€ä¸ªç©ºå®ç°ä½œä¸ºæ­¤æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚è¿™ç§ç©ºçš„é’©å­æ–¹æ³•å«åšâ€œDo Nothing Hookâ€ã€‚æ˜¾ç„¶ï¼Œè¿™ç§é»˜è®¤é’©å­æ–¹æ³•åœ¨ç¼ºçœé€‚é…æ¨¡å¼é‡Œé¢å·²ç»è§è¿‡äº†ï¼Œä¸€ä¸ªç¼ºçœé€‚é…æ¨¡å¼è®²çš„æ˜¯ä¸€ä¸ªç±»ä¸ºä¸€ä¸ªæ¥å£æä¾›ä¸€ä¸ªé»˜è®¤çš„ç©ºå®ç°ï¼Œä»è€Œä½¿å¾—ç¼ºçœé€‚é…ç±»çš„å­ç±»ä¸å¿…åƒå®ç°æ¥å£é‚£æ ·å¿…é¡»ç»™å‡ºæ‰€æœ‰æ–¹æ³•çš„å®ç°ï¼Œå› ä¸ºé€šå¸¸ä¸€ä¸ªå…·ä½“ç±»å¹¶ä¸éœ€è¦æ‰€æœ‰çš„æ–¹æ³•ã€‚</p>

<h2>å‘½åè§„åˆ™</h2>

<p>é’©å­æ–¹æ³•çš„åå­—åº”å½“ä»¥doå¼€å§‹ï¼Œè¿™æ˜¯ç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„Javaå¼€å‘äººå‘˜çš„æ ‡å‡†åšæ³•ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé’©å­æ–¹æ³•hookMethod()åº”å½“ä»¥doå¼€å¤´ï¼›åœ¨HttpServletç±»ä¸­ï¼Œä¹Ÿéµä»è¿™ä¸€å‘½åè§„åˆ™ï¼Œå¦‚doGet()ã€doPost()ç­‰æ–¹æ³•ã€‚</p>

<h2>ä¸€ä¸ªç®€å•çš„ä¾‹å­</h2>

<p>æŠ½è±¡æ¨¡æ¿</p>

<pre><code>public abstract class BeverageMake {
// finalå¯ä»¥é˜²æ­¢å­ç±»æ›´æ”¹è¦†ç›–è¯¥ç®—æ³•ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç®—æ³•æ­¥éª¤ä¸è¢«ç ´å
public final void prepareRecipe() {
    boilWater();
    brew();
    pourInCup();
    if (hookCondiments())
        addCondiments();
}

abstract void brew();

abstract void addCondiments();

// çƒ§æ°´
public void boilWater() {
    System.out.println("Now start to boiling water");
}

// é¥®æ–™å¯¼å…¥æ¯å­æ±‡æ€»
public void pourInCup() {
    System.out.println("pour the beverage into the cup");
}

// åŠ å…¥äº†é’©å­ï¼Œæ¥è®©å­ç±»å†³å®šæ˜¯å¦æ‰§è¡Œè¯¥æ­¥éª¤
/**
 * æ¨¡æ¿æ–¹æ³•ä¸­æŒ‚é’©ï¼š
 * å½“åœ¨æ¨¡æ¿æ–¹æ³•ä¸­æŸä¸€äº›æ­¥éª¤æ˜¯å¯é€‰çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯è¯¥æ­¥éª¤ä¸ä¸€å®šè¦æ‰§è¡Œï¼Œ
 * å¯ä»¥ç”±å­ç±»æ¥å†³å®šæ˜¯å¦è¦æ‰§è¡Œï¼Œåˆ™æ­¤æ—¶å°±éœ€è¦ç”¨ä¸Šé’©å­ã€‚
 * é’©å­æ˜¯ä¸€ç§è¢«å£°æ˜åœ¨æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•ï¼Œä½†ä¸€èˆ¬æ¥è¯´å®ƒåªæ˜¯ç©ºçš„æˆ–è€…å…·æœ‰é»˜è®¤å€¼ï¼Œ
 * å­ç±»å¯ä»¥å®ç°è¦†ç›–è¯¥é’©å­ï¼Œæ¥è®¾ç½®ç®—æ³•æ­¥éª¤çš„æŸä¸€æ­¥éª¤æ˜¯å¦è¦æ‰§è¡Œã€‚
 * é’©å­å¯ä»¥è®©å­ç±»å®ç°ç®—æ³•ä¸­å¯é€‰çš„éƒ¨åˆ†ï¼Œ
 * è®©å­ç±»èƒ½å¤Ÿæœ‰æœºä¼šå¯¹æ¨¡æ¿æ–¹æ³•ä¸­æŸäº›ä¸€å³å°†å‘ç”Ÿçš„æ­¥éª¤åšå‡ºååº”ã€‚
 * é‡å†™ä¸Šé¢çš„ä»£ç ï¼š
 * è¿™æ¬¡èŒ¶å¶æ³¡å¥½åï¼ŒåŠ ä¸åŠ ä¸œè¥¿ç”±å­ç±»å»å†³å®šã€‚
 * @return
 */
public boolean hookCondiments() {
    return true;
}
}
</code></pre>

<p>å…·ä½“æ¨¡æ¿</p>

<pre><code>public class Tea extends BeverageMake {

@Override
void brew() {
    // TODO Auto-generated method stub
    System.out.println("boil the tea in the water");
}

@Override
void addCondiments() {
    // TODO Auto-generated method stub
    System.out.println("put some condiments into the tea");
}

// è®¾ç½®ä¸éœ€è¦åŠ é¥®æ–™ï¼Œè¿™æ ·å°±å¯ä»¥æ§åˆ¶ç®—æ³•çš„æŸä¸€ä¸ªæ­¥éª¤ä¸æ‰§è¡Œ
@Override
public boolean hookCondiments() {
    return false;
}
}
</code></pre>

<h2>æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨Servletä¸­çš„åº”ç”¨</h2>

<p>serviceæ–¹æ³•ä¸ºæ¨¡æ¿æ–¹æ³•ã€‚doGet()å’ŒdoPost()ç­‰ä»¥doå¼€å¤´çš„æ–¹æ³•ä¸ºåŸºæœ¬æ–¹æ³•ç±»åˆ«ä¸­çš„é’©å­æ–¹æ³•ã€‚</p>

<pre><code>protected void service(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {

    String method = req.getMethod();

    if (method.equals(METHOD_GET)) {
        long lastModified = getLastModified(req);
        if (lastModified == -1) {
            // servlet doesn't support if-modified-since, no reason
            // to go through further expensive logic
            doGet(req, resp);
        } else {
            long ifModifiedSince = req.getDateHeader(HEADER_IFMODSINCE);
            if (ifModifiedSince &lt; (lastModified / 1000 * 1000)) {
                // If the servlet mod time is later, call doGet()
                // Round down to the nearest second for a proper compare
                // A ifModifiedSince of -1 will always be less
                maybeSetLastModified(resp, lastModified);
                doGet(req, resp);
            } else {
                resp.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
            }
        }

    } else if (method.equals(METHOD_HEAD)) {
        long lastModified = getLastModified(req);
        maybeSetLastModified(resp, lastModified);
        doHead(req, resp);

    } else if (method.equals(METHOD_POST)) {
        doPost(req, resp);

    } else if (method.equals(METHOD_PUT)) {
        doPut(req, resp);        

    } else if (method.equals(METHOD_DELETE)) {
        doDelete(req, resp);

    } else if (method.equals(METHOD_OPTIONS)) {
        doOptions(req,resp);

    } else if (method.equals(METHOD_TRACE)) {
        doTrace(req,resp);

    } else {
        //
        // Note that this means NO servlet supports whatever
        // method was requested, anywhere on this server.
        //

        String errMsg = lStrings.getString("http.method_not_implemented");
        Object[] errArgs = new Object[1];
        errArgs[0] = method;
        errMsg = MessageFormat.format(errMsg, errArgs);

        resp.sendError(HttpServletResponse.SC_NOT_IMPLEMENTED, errMsg);
    }
}
</code></pre>

<h2>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„å¦ä¸€ç§å®ç°æ–¹å¼ï¼šå›è°ƒå‡½æ•°</h2>

<p>é€šè¿‡å›è°ƒåœ¨æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œè°ƒç”¨åˆ°å…·ä½“çš„å®ç°ç±»ä¸­çš„ æ–¹æ³•ï¼Œå…¶æœ¬è´¨æ˜¯åˆ©ç”¨Javaçš„åŠ¨æ€ç»‘å®šæŠ€æœ¯ï¼Œåœ¨è¿™ç§å®ç°ä¸­ï¼Œå¯ä»¥ä¸æŠŠå®ç°ç±»å†™æˆå•ç‹¬çš„ç±»ï¼Œè€Œä½¿ç”¨å†…éƒ¨ç±»æˆ–åŒ¿åå†…éƒ¨ç±»æ¥å®ç°å›è°ƒæ–¹æ³•ã€‚</p>

<h3>ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3>

<p>è®¾æƒ³ä¸€ä¸ªç®€å•çš„åº”ç”¨åœºæ™¯ï¼š</p>

<ol>
<li>ä¸€ä¸ªç¨‹åºè¦ä»xmlã€æ•°æ®åº“ã€txtã€ç½‘ç»œæ¥å£ç­‰è·å–æ•°æ®ï¼šreadData()</li>
<li>ç„¶åå¤„ç†æ•°æ®ï¼š<code>System.out.println("å¤„ç†æ•°æ®");</code></li>
<li>æœ€åå¯¼å‡ºå¤„ç†åçš„æ•°æ®åˆ°xmlã€æ•°æ®åº“ã€txtã€ç½‘ç»œç­‰ï¼šexportData()</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Abc</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="nf">Abc</span><span class="o">(</span><span class="n">ReadData</span> <span class="n">readData</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">schedule</span><span class="o">(</span><span class="n">readData</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// å†…éƒ¨ç±»æ–¹å¼</span>
</span><span class='line'>      <span class="n">schedule</span><span class="o">(</span><span class="k">new</span> <span class="nf">XMLReadData</span><span class="o">());</span>
</span><span class='line'>
</span><span class='line'>      <span class="cm">/*</span>
</span><span class='line'><span class="cm">      * ä½¿ç”¨ç±»ä¼¼javaä¸­çš„threadæ–¹å¼ new Thread(new Runnable() {</span>
</span><span class='line'><span class="cm">      * </span>
</span><span class='line'><span class="cm">      * @Override public void run() {</span>
</span><span class='line'><span class="cm">      * </span>
</span><span class='line'><span class="cm">      * </span>
</span><span class='line'><span class="cm">      * } });</span>
</span><span class='line'><span class="cm">      */</span>
</span><span class='line'>      <span class="k">new</span> <span class="nf">Abc</span><span class="o">(</span><span class="k">new</span> <span class="nf">ReadData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>              <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exportData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>              <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">});</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">// åŒ¿åå†…éƒ¨ç±»æ–¹å¼</span>
</span><span class='line'>      <span class="n">schedule</span><span class="o">(</span><span class="k">new</span> <span class="nf">ReadData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ä»ç½‘ä¸Šè¯»&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="nd">@Override</span>
</span><span class='line'>          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exportData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>              <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">schedule</span><span class="o">(</span><span class="n">ReadData</span> <span class="n">readData</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">readData</span><span class="o">.</span><span class="na">readData</span><span class="o">();</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;å¤„ç†æ•°æ®&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="n">readData</span><span class="o">.</span><span class="na">exportData</span><span class="o">();</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">interface</span> <span class="nc">ReadData</span> <span class="o">{</span>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">readData</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">void</span> <span class="nf">exportData</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span> <span class="c1">// å†…éƒ¨ç±»æ–¹å¼</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">DBReadData</span> <span class="kd">implements</span> <span class="n">ReadData</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ä»æ•°æ®åº“ä¸­è¯»&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exportData</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">XMLReadData</span> <span class="kd">implements</span> <span class="n">ReadData</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ä»xmlä¸­è¯»&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exportData</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">TextReadData</span> <span class="kd">implements</span> <span class="n">ReadData</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ä»textä¸­è¯»&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exportData</span><span class="o">()</span> <span class="o">{</span> <span class="c1">// TODO Auto-generated method stub</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„ä¸¤ç‚¹ï¼š</p>

<ol>
<li>å¯ä»¥ä½¿ç”¨å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»ä¸¤ç§æ–¹å¼å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼</li>
<li><p>æ³¨æ„ä»£ç ä¸­çš„æ¨¡ä»¿Threadçš„æ–¹å¼ï¼š</p>

<pre><code> new Thread(new Runnable() {

     @Override
     public void run() {


     }
 });
</code></pre></li>
</ol>


<h3>å®é™…é¡¹ç›®ä¸­çš„ä¸€ä¸ªåº”ç”¨ï¼ˆä»…è´´ä¸Šæ¨¡æ¿æ–¹æ³•ï¼‰</h3>

<pre><code>/**
 * ç¼“å­˜æŸ¥è¯¢çš„æ¨¡æ¿ï¼Œå¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®ï¼Œä»ç¼“å­˜ä¸­å–å¾—
 * 
 * å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œå°†è°ƒç”¨çº¿ç¨‹æŸ¥è¯¢æ•°æ®åº“é€»è¾‘ï¼Œå°†ç»“æœç¼“å­˜èµ·æ¥
 * 
 * æ–¹ä¾¿ç¼–å†™ ç¼“å­˜æ“ä½œä»£ç ï¼Œé¿å…é‡å¤é€»è¾‘
 * 
 * @param cachedOperationCallback
 *            å›è°ƒå‡½æ•°
 * @return
 * @since yangyu @ Apr 12, 2013
 */
public Object obtainCachedData(CacheProvider assignedCacheProvider, String key, int expr,
        final CachedOperationCallback cachedOperationCallback) {

    if (assignedCacheProvider == null) {
        assignedCacheProvider = cacheProvider;
    }

    CachedResult cachedObject = null;
    rwl.readLock().lock();
    cachedObject = assignedCacheProvider.get(key);
    if (cachedObject.notExist()) {
        rwl.readLock().unlock();
        rwl.writeLock().lock();
        try {
            if (cachedObject.notExist()) {
                Object dbObject = cachedOperationCallback.doTakeCachingData();
                assignedCacheProvider.set(key, dbObject, expr);
                cachedObject = new CachedResult(dbObject);
                if(LOG.isDebugEnabled()){
                    LOG.debug("Cached data from database key:" + key);
                }
            }
        } finally {
            rwl.writeLock().unlock();
        }
    } else {
        rwl.readLock().unlock();
    }

    return cachedObject.getResultObject();
}
</code></pre>

<h2>ä¸¤ç§å®ç°æ–¹å¼çš„æ¯”è¾ƒ</h2>

<ol>
<li><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å€ŸåŠ©äºç»§æ‰¿ï¼Œå¯¹æŠ½è±¡æ–¹æ³•åœ¨å­ç±»ä¸­è¿›è¡Œæ‰©å±•æˆ–å®ç°ï¼Œæ˜¯åœ¨ç¼–è¯‘æœŸé—´é™æ€å†³å®šçš„ï¼Œæ˜¯ç±»çº§å…³ç³»ã€‚ä½¿ç”¨Javaå›è°ƒæ–¹æ³•ï¼Œåˆ©ç”¨åŠ¨æ€ç»‘å®šæŠ€æœ¯åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€å†³å®šçš„ï¼Œæ˜¯å¯¹è±¡çº§çš„å…³ç³»ã€‚</p></li>
<li><p>ä½¿ç”¨å›è°ƒæœºåˆ¶ä¼šæ›´çµæ´»ï¼Œå› ä¸ºJavaæ˜¯å•ç»§æ‰¿çš„ï¼Œå¦‚æœä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼Œå¯¹äºå­ç±»è€Œè¨€ï¼Œä»Šåå°±ä¸èƒ½ç»§æ‰¿å…¶å®ƒå¯¹è±¡äº†ã€‚è€Œä½¿ç”¨å›è°ƒï¼Œæ˜¯åŸºäºæ¥å£çš„ï¼Œæ–¹ä¾¿æ‰©å±•ã€‚ å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ªå­ç±»éƒ½è¦ä½¿ç”¨æ¨¡æ¿æ–¹æ³•ï¼Œåˆ™æ‰€æœ‰çš„å­ç±»éƒ½è¦å®ç°æ¨¡æ¿æ–¹æ³•ï¼Œæ— å½¢ä¸­å¢å¤šäº†å­ç±»çš„ä¸ªæ•°ã€‚</p></li>
<li><p>ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿ç”¨ç»§æ‰¿æ–¹å¼ä¼šæ›´ç®€å•ç‚¹ï¼Œå› ä¸ºçˆ¶ç±»æä¾›äº†å®ç°çš„æ–¹æ³•ï¼Œå­ç±»å¦‚æœä¸æƒ³æ‰©å±•ï¼Œé‚£å°±ä¸ç”¨ç®¡ã€‚å¦‚æœä½¿ç”¨å›è°ƒæœºåˆ¶ï¼Œå›è°ƒçš„æ¥å£éœ€è¦æŠŠæ‰€æœ‰å¯èƒ½è¢«æ‰©å±•çš„ æ–¹æ³•éƒ½å®šä¹‰è¿›å»ï¼Œè¿™å°±å¯¼è‡´å®ç°çš„æ—¶å€™ï¼Œä¸ç®¡ä½ è¦ä¸è¦æ‰©å±•ï¼Œä½ éƒ½è¦å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå“ªæ€•ä½ ä»€ä¹ˆéƒ½ä¸åšï¼Œåªæ˜¯è½¬è°ƒæ¨¡æ¿ä¸­å·²æœ‰çš„å®ç°ï¼Œéƒ½è¦å†™å‡ºæ¥ã€‚</p></li>
</ol>


<h2>å‚è€ƒæ–‡ç« ï¼š</h2>

<ol>
<li><a href="http://kim-miao.iteye.com/blog/1669310">http://kim-miao.iteye.com/blog/1669310</a></li>
<li><a href="http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html">http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html</a></li>
</ol>

</div>


<div class="meta">
	<div class="date">




Jul 29th, 2014</div>
	<div class="tags">

</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    æ˜“è£ä¹‰

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>