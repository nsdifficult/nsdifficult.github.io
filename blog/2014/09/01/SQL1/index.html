
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>《SQL必知必会》读书笔记（一） - RONGYI.WORK</title>
	<meta name="author" content="易荣义">

	
	<meta name="description" content="1、检索数据 select 语句非常简单。就不复述了。需要注意几个点： select * from products;使用星号通配符来检索可以返回所有列。但需注意： 除非确实需要检索表中每个列，否则最好不要使用*通配符。1）检索不需要的列会降低检索和应用程序的性能。2）可能会导致SQL注入。
使用 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="RONGYI.WORK" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="http://libs.useso.com/js/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">RONGYI.WORK</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">主页</a></li>
	<li><a href="/blog/archives">所有文章</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">主页</a></li>
	<li><a href="/blog/archives">所有文章</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:rongyi.work">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:rongyi.work">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">《SQL必知必会》读书笔记（一）</h2>
	<div class="entry-content"><h2>1、检索数据</h2>

<p>select 语句非常简单。就不复述了。需要注意几个点：</p>

<p><code>select * from products;</code>使用星号通配符来检索可以返回所有列。但需注意：</p>

<ol>
<li>除非确实需要检索表中每个列，否则最好不要使用*通配符。1）检索不需要的列会降低检索和应用程序的性能。2）可能会导致SQL注入。</li>
<li>使用*通配符有一个优点：能检索出名字未知的列。<!--more--></li>
</ol>


<h2>2、排序检索数据</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="n">prod_id</span><span class="p">,</span><span class="n">prod_name</span><span class="p">,</span><span class="n">prod_price</span> <span class="k">from</span> <span class="n">products</span> <span class="k">order</span> <span class="k">by</span> <span class="n">prod_price</span> <span class="k">DESC</span><span class="p">,</span><span class="n">prod_id</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<ol>
<li><code>order by</code>子句可以按照一个或者多个列进行排序，例如按照姓和名排序，如果有多个相同的姓，这样做很有用。</li>
<li><code>order by</code>子句能按照列位置进行排序。如<code>select prod_id,prod_name from products order by 1, 2;</code></li>
<li><code>order by</code>子句可以指定排序方向：<code>DESC</code>,<code>DESCENDING</code>。默认是升序：<code>DESCENDING</code></li>
</ol>


<h2>3、过滤数据</h2>

<p>where子句的操作符解释：</p>

<table>
<thead>
<tr>
<th>操作符 </th>
<th> 说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>＝ </td>
<td> 等于</td>
</tr>
<tr>
<td>&lt; > </td>
<td> 不等于</td>
</tr>
<tr>
<td>!= </td>
<td> 不等于</td>
</tr>
<tr>
<td>&lt; </td>
<td> 小于</td>
</tr>
<tr>
<td>&lt;= </td>
<td> 小于等于</td>
</tr>
<tr>
<td>!&lt; </td>
<td> 不小于</td>
</tr>
<tr>
<td>> </td>
<td> 大于</td>
</tr>
<tr>
<td>>= </td>
<td> 大于等于</td>
</tr>
<tr>
<td>!> </td>
<td> 不大于</td>
</tr>
<tr>
<td>BETWEEN </td>
<td> 在指定的两个值之间</td>
</tr>
<tr>
<td>IS NULL </td>
<td> 为NULL值</td>
</tr>
</tbody>
</table>


<h2>4、高级数据过滤</h2>

<ol>
<li>and</li>
<li>or</li>
<li>in <code>select pro_name from products where vend_id in ('DLL01','BRS01') order by prod_name;</code></li>
<li>NOT：否定它之后所跟的任何条件。<code>select pro_name from products where NOT vend_id in ('DLL01','BRS01')</code>。注意mysql里只有 <code>not exist</code>。</li>
</ol>


<p>IN与OR比较：</p>

<ol>
<li>在使用长的合法选项清单时，IN操作符的语法更清楚且更直观。</li>
<li>在使用IN时，计算次序更容易管理（因为使用的操作符更少）。</li>
<li>IN操作符一般比OR操作符清单执行更快。</li>
<li>IN最大的优点是可以包含其他的SELECT语句，使得能够更动态地建立WHERE子句。</li>
</ol>


<h2>5、用通配符进行过滤</h2>

<p>like操作符使用的通配符</p>

<ol>
<li><code>%</code> 表示任何字符出现任意次数。</li>
<li><code>_</code> 匹配单个字符。</li>
<li><code>[]</code> 用来指定一个字符集，必须匹配指定位置的一个字符。如以J或者M开头的联系人：<code>select * from customers where name like '[JM]%'</code>

<h2>6、创建计算字段</h2></li>
<li>拼接字段：将值联结到一起构成单个值。使用<code>+</code>或者<code>||</code>。</li>
<li>使用别名。

<h2>7、使用数据处理函数</h2></li>
<li>文本处理函数：<code>UPPER()</code> <code>LOWER()</code> <code>LEFT()</code> <code>LTRIM()</code> <code>RTRIM()</code> <code>LENGTH()</code> <code>SOUNDEX()</code></li>
<li>日期和时间处理函数：<code>YEAR()</code>mysql支持。 <code>DATE_PART('year',date)</code>sqlserver和postgresql支持。 <code>to_date()</code>oracle支持。 <code>between</code>同样支持两个日期之间的检索。</li>
<li>数值处理函数：<code>ABS()</code> <code>COS()</code> <code>EXP()</code> <code>PI()</code> <code>SIN()</code> <code>SQRT()</code> <code>TAN()</code>

<h2>8、汇总数据</h2></li>
<li>聚集函数：<code>AVG()</code> <code>COUNT()</code> <code>MAX()</code> <code>MIN()</code> <code>SUM()</code>。聚集不同的值使用<code>DISTINCT</code>如：<code>select avg(distinct prod_price) as avg_price from products;</code></li>
</ol>


<h2>9、分组数据</h2>

<p>一个例子，返回每个供应商提供的产品数目
<code>select vend_id,count(*) as num_prods from products group by vend_id;</code></p>

<table>
<thead>
<tr>
<th>vend_id </th>
<th> num_prods</th>
</tr>
</thead>
<tbody>
<tr>
<td>BRS01 </td>
<td> 3</td>
</tr>
<tr>
<td>DLL01 </td>
<td> 4</td>
</tr>
<tr>
<td>FNG01 </td>
<td> 2</td>
</tr>
</tbody>
</table>


<h2>10、使用子查询</h2>

<p>使用in子句</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">cust_id</span> <span class="k">from</span> <span class="n">orders</span> <span class="k">where</span> <span class="n">order_num</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">order_num</span> <span class="k">from</span> <span class="n">orderItems</span> <span class="k">where</span> <span class="n">prod_id</span><span class="o">=</span><span class="s1">&#39;RGAN01&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>11、联结表</h2>

<p>SQL最强大的功能之一就是能在数据查询的执行中联结表。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="n">vend_name</span> <span class="p">,</span><span class="n">pro_name</span><span class="p">,</span> <span class="n">prod_price</span> <span class="k">from</span> <span class="n">vendors</span><span class="p">,</span><span class="n">products</span> <span class="k">where</span> <span class="n">vendors</span><span class="p">.</span><span class="n">vend_id</span> <span class="o">=</span> <span class="n">products</span><span class="p">.</span><span class="n">vend_id</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>内联结</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">INNER</span> <span class="k">JOIN</span> <span class="p">..</span> <span class="k">ON</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="n">vend_name</span><span class="p">,</span> <span class="n">prod_name</span><span class="p">,</span> <span class="n">prod_price</span>
</span><span class='line'><span class="k">from</span> <span class="n">vendors</span><span class="p">,</span> <span class="n">products</span>
</span><span class='line'><span class="k">where</span> <span class="n">vendors</span><span class="p">.</span><span class="n">vend_id</span> <span class="o">=</span> <span class="n">products</span><span class="p">.</span><span class="n">vend_id</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上SQL所用到的联结称为等值联结，它基于两个表之间的等值测试。这种联结也称为内部联结。 <br/>
也可以使用如下语法来明确指定联结的类型：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="n">vend_name</span><span class="p">,</span> <span class="n">prod_name</span><span class="p">,</span> <span class="n">prod_price</span>
</span><span class='line'><span class="k">from</span> <span class="n">vendors</span>
</span><span class='line'><span class="k">inner</span> <span class="k">join</span> <span class="n">products</span>
</span><span class='line'><span class="k">on</span> <span class="n">vendors</span><span class="p">.</span><span class="n">vend_id</span> <span class="o">=</span> <span class="n">products</span><span class="p">.</span><span class="n">vend_id</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>除了内部联结（等值联结）的简单联结。还有其他3种联结：自联结、自然联结和外部联结。</p>

<h3>自联结</h3>

<p>不止一次引用相同的表，通过表的别名进行比较。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="n">c1</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span> <span class="n">c1</span><span class="p">.</span><span class="n">cust_name</span>
</span><span class='line'><span class="k">from</span> <span class="n">customers</span> <span class="k">as</span> <span class="n">c1</span><span class="p">,</span> <span class="n">customers</span> <span class="k">as</span> <span class="n">c2</span>
</span><span class='line'><span class="k">where</span> <span class="n">c1</span><span class="p">.</span><span class="n">cust_name</span> <span class="o">=</span> <span class="n">c2</span><span class="p">.</span><span class="n">cust_name</span>
</span><span class='line'><span class="k">and</span> <span class="n">c2</span><span class="p">.</span><span class="n">cust_contact</span> <span class="o">=</span> <span class="s1">&#39;jim jones&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>自然联结</h3>

<p>无论何时对表进行联结，应该至少有一个列出现在不止一个表中。
标准联结返回所有数据，甚至相同的列多次出现。
自然联结排除多次出现，使每一个列只返回一次。</p>

<p>规则：自然联结是这样一种联结，其中你只能选择那些唯一的列。这一般通过对表使用通配符（select *），对所有其他表的列使用明确的子集来完成。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="k">C</span><span class="p">.</span><span class="o">*</span><span class="p">,</span> <span class="n">O</span><span class="p">.</span><span class="n">order_num</span><span class="p">,</span> <span class="n">O</span><span class="p">.</span><span class="n">order_date</span>
</span><span class='line'><span class="k">from</span> <span class="n">customer</span> <span class="k">as</span> <span class="k">C</span> <span class="p">,</span> <span class="n">orders</span> <span class="k">as</span> <span class="n">O</span>
</span><span class='line'><span class="k">where</span> <span class="k">C</span><span class="p">.</span><span class="n">cust_id</span> <span class="o">=</span> <span class="n">O</span><span class="p">.</span><span class="n">cust_id</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>(注：这里通配符只对第一个表使用。所有其他列明确列出，所以没有重复的列将被检索出来。)</p>

<h3>外联结</h3>

<p>许多联结将一个表中的行与另一个表中的行相关联。但有时候需要包含没有关联行的那些行。
联结包含了那些在关联表中没有关联行的行。这些类型的联结称为外部联结。</p>

<h4>左（外）联结</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">LEFT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="p">..</span> <span class="k">ON</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">Persons</span><span class="p">.</span><span class="n">LastName</span><span class="p">,</span> <span class="n">Persons</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span> <span class="n">Orders</span><span class="p">.</span><span class="n">OrderNo</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">Persons</span>
</span><span class='line'><span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">Orders</span>
</span><span class='line'><span class="k">ON</span> <span class="n">Persons</span><span class="p">.</span><span class="n">Id_P</span><span class="o">=</span><span class="n">Orders</span><span class="p">.</span><span class="n">Id_P</span>
</span><span class='line'><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">Persons</span><span class="p">.</span><span class="n">LastName</span>
</span></code></pre></td></tr></table></div></figure>


<h4>右（外）联结</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">RIGHT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="p">..</span> <span class="k">ON</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">Persons</span><span class="p">.</span><span class="n">LastName</span><span class="p">,</span> <span class="n">Persons</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span> <span class="n">Orders</span><span class="p">.</span><span class="n">OrderNo</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">Persons</span>
</span><span class='line'><span class="k">RIGHT</span> <span class="k">JOIN</span> <span class="n">Orders</span>
</span><span class='line'><span class="k">ON</span> <span class="n">Persons</span><span class="p">.</span><span class="n">Id_P</span><span class="o">=</span><span class="n">Orders</span><span class="p">.</span><span class="n">Id_P</span>
</span><span class='line'><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">Persons</span><span class="p">.</span><span class="n">LastName</span>
</span></code></pre></td></tr></table></div></figure>


<h2>12、组合查询</h2>

<p>SQL UNION 操作符<br/>
* UNION 操作符
列出所有在中国和美国的不同的雇员名：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">E_Name</span> <span class="k">FROM</span> <span class="n">Employees_China</span>
</span><span class='line'><span class="k">UNION</span>
</span><span class='line'><span class="k">SELECT</span> <span class="n">E_Name</span> <span class="k">FROM</span> <span class="n">Employees_USA</span>
</span><span class='line'><span class="err">结果：</span>
</span><span class='line'><span class="n">E_Name</span>
</span><span class='line'><span class="err">——————————</span>
</span><span class='line'><span class="n">Zhang</span><span class="p">,</span> <span class="n">Hua</span>
</span><span class='line'><span class="n">Wang</span><span class="p">,</span> <span class="n">Wei</span>
</span><span class='line'><span class="n">Carter</span><span class="p">,</span> <span class="n">Thomas</span>
</span><span class='line'><span class="n">Yang</span><span class="p">,</span> <span class="n">Ming</span>
</span><span class='line'><span class="n">Adams</span><span class="p">,</span> <span class="n">John</span>
</span><span class='line'><span class="n">Bush</span><span class="p">,</span> <span class="n">George</span>
</span><span class='line'><span class="n">Gates</span><span class="p">,</span> <span class="n">Bill</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>UNION ALL 操作符</li>
</ul>


<p>列出在中国和美国的所有的雇员：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="n">E_Name</span> <span class="k">FROM</span> <span class="n">Employees_China</span>
</span><span class='line'><span class="k">UNION</span> <span class="k">ALL</span>
</span><span class='line'><span class="k">SELECT</span> <span class="n">E_Name</span> <span class="k">FROM</span> <span class="n">Employees_USA</span>
</span><span class='line'><span class="err">结果</span>
</span><span class='line'><span class="n">_____________</span>
</span><span class='line'><span class="n">E_Name</span>
</span><span class='line'><span class="n">Zhang</span><span class="p">,</span> <span class="n">Hua</span>
</span><span class='line'><span class="n">Wang</span><span class="p">,</span> <span class="n">Wei</span>
</span><span class='line'><span class="n">Carter</span><span class="p">,</span> <span class="n">Thomas</span>
</span><span class='line'><span class="n">Yang</span><span class="p">,</span> <span class="n">Ming</span>
</span><span class='line'><span class="n">Adams</span><span class="p">,</span> <span class="n">John</span>
</span><span class='line'><span class="n">Bush</span><span class="p">,</span> <span class="n">George</span>
</span><span class='line'><span class="n">Carter</span><span class="p">,</span> <span class="n">Thomas</span>
</span><span class='line'><span class="n">Gates</span><span class="p">,</span> <span class="n">Bill</span>
</span></code></pre></td></tr></table></div></figure>


<h2>13、插入数据</h2>

<ul>
<li>语法</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">INSERT</span> <span class="k">INTO</span> <span class="err">表名称</span> <span class="k">VALUES</span> <span class="p">(</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span> <span class="err">值</span><span class="mi">2</span><span class="p">,....)</span>
</span></code></pre></td></tr></table></div></figure>


<p>也可以指定要插入数据的列：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table_name</span> <span class="p">(</span><span class="err">列</span><span class="mi">1</span><span class="p">,</span> <span class="err">列</span><span class="mi">2</span><span class="p">,...)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span> <span class="err">值</span><span class="mi">2</span><span class="p">,....)</span>
</span></code></pre></td></tr></table></div></figure>


<p>第二种更安全，也更灵活（即使表结构发生改变也能正确工作。） <br/>
另外：可以只插入部分列。
* 插入检索出的数据（不管select语句返回多少行，都将被insert插入）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">insert</span> <span class="k">select</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">insert</span> <span class="k">into</span> <span class="n">customers</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">select</span> <span class="n">id</span><span class="p">,</span><span class="n">name</span> <span class="k">from</span> <span class="n">custnew</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>从一个表复制到另一个表<br/>
<code>select into</code>：与<code>insert select</code>的区别是，后者导出数据，前者导入表。</li>
</ul>


<p>MySql:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">create</span> <span class="k">table</span> <span class="n">custcopy</span> <span class="k">as</span>
</span><span class='line'><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">customers</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Oracle:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="o">*</span>
</span><span class='line'><span class="k">into</span> <span class="n">custcopy</span>
</span><span class='line'><span class="k">from</span> <span class="n">customers</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>14、更新和删除数据</h2>

<p>更新数据：<code>UPDATE 表名称 SET 列名称 = 新值 WHERE 列名称 = 某值</code>;</p>

<p>删除数据：<code>DELETE FROM 表名称 WHERE 列名称 = 值</code>;</p>

<p>更新和删除应该遵循的习惯：</p>

<ol>
<li>除非确实要更新或者删除每一行，否则绝对不要使用不带where子句的update或者delete语句。</li>
<li>保证每个表都有主键。</li>
<li>在对update和delete语句使用where子句前，应该先使用select进行测试，保证它过滤的是正确的记录，以防编写的where子句不正确。</li>
<li>使用强制实施引用完整性的数据库，这样DBMS将不允许删除具有与其他表相关联的数据的行。（存疑）。</li>
<li>有的DBMS允许数据库管理员施加约束，以防止执行不带where子句的update或者delete。如果所采用的dbms支持这个特性，应该使用它。</li>
</ol>


<h2>15、创建和操纵表</h2>

<h3>创建表</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Persons</span>
</span><span class='line'><span class="p">(</span>
</span><span class='line'><span class="n">Id_P</span> <span class="nb">int</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>
</span><span class='line'><span class="n">LastName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
</span><span class='line'><span class="n">FirstName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
</span><span class='line'><span class="n">Address</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
</span><span class='line'><span class="n">City</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;BeiJing&#39;</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>更新表</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">alter</span> <span class="k">table</span> <span class="n">vendors</span> <span class="k">add</span> <span class="n">vend_phone</span> <span class="nb">char</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="o">//</span><span class="err">增加列</span>
</span><span class='line'><span class="k">alter</span> <span class="k">table</span> <span class="n">vendors</span> <span class="k">drop</span> <span class="k">column</span> <span class="n">vend_phone</span><span class="p">;</span><span class="o">//</span><span class="err">删除列</span>
</span></code></pre></td></tr></table></div></figure>


<h3>删除表</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">drop</span> <span class="k">table</span> <span class="n">custcopy</span>
</span></code></pre></td></tr></table></div></figure>



</div>


<div class="meta">
	<div class="date">




Sep 1st, 2014</div>
	<div class="tags">

</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>



｛% if site.duoshuo_short_name and site.duoshuo_comments == true and page.comments == true %｝
  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite">｛% include post/duoshuo.html %｝</div>
  </section>
｛% endif %｝</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    易荣义

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>